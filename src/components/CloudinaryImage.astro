---
import { Image, type RemoteImageProps } from 'astro:assets'
import { Cloudinary } from '@cloudinary/url-gen'

type Props = RemoteImageProps

const cld = new Cloudinary({
  cloud: { cloudName: import.meta.env.CLOUDINARY_CLOUD_NAME }
})

const { width, height, alt } = Astro.props
const src = cld.image(Astro.props.src).createCloudinaryURL()
---

<figure>
  <Image {src} {alt} {width} {height} loading="lazy" inferSize />
</figure>

<style>
  img {
    max-width: 100%;
    height: auto;
  }
</style>
