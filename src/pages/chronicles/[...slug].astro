---
import type { GetStaticPaths } from 'astro'
import { CollectionEntry } from 'astro:content'
import { getCollection } from 'astro:content'
import CloudinaryImage from '~/components/CloudinaryImage.astro'
import Blog from '~/layouts/Blog.astro'
import * as R from 'remeda'

interface Props {
  entry: CollectionEntry<'chronicles'>
}

export const getStaticPaths: GetStaticPaths = async () =>
  R.pipe(
    await getCollection('chronicles'),
    R.map(entry => ({ params: { slug: entry.slug }, props: { entry } }))
  )

const { entry } = Astro.props
const { Content } = await entry.render()
---

<Blog title={entry.data.title} description={entry.data.title}>
  <Content components={{ img: CloudinaryImage }} />
</Blog>
